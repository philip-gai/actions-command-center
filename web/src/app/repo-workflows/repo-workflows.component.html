<mat-card class="card">
  <div>
    <mat-card-header>
      <mat-card-title>
        Workflow Runs
      </mat-card-title>
      <button mat-mini-fab color="secondary" class="float-right" aria-label="Favorite button"
        (click)="refreshWorkflows()">
        <mat-icon>refresh</mat-icon>
      </button>
    </mat-card-header>
  </div>
  <mat-card-content>
    <!-- Repo card -->
    <mat-card *ngFor="let repo of repos">
      <ng-container *ngIf="repoWorkflows[repo] | async as workflows; else loading">
        <mat-card-header>
          <mat-card-title>
            {{repo}}
            <button mat-mini-fab color="secondary" aria-label="Favorite button" (click)="removeRepo(repo)">
              <mat-icon>remove</mat-icon>
            </button>
          </mat-card-title>
          <mat-card-subtitle>
            {{workflows.length}} workflow runs waiting
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <!-- Workflow list -->
          <mat-selection-list #workflowList>
            <ng-container *ngIf="workflows.length > 0">
              <mat-list-option *ngFor="let workflow of workflows; let i = index">
                {{workflow.name}}
              </mat-list-option>
            </ng-container>
          </mat-selection-list>
        </mat-card-content>
        <mat-card-actions>
        </mat-card-actions>
      </ng-container>
    </mat-card>
  </mat-card-content>
</mat-card>

<!-- Templates -->
<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
